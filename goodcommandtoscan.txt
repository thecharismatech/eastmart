SCAN_NUM=2; (printf "=== SCAN ${SCAN_NUM} ===\n\nMODULES:\n\n" && for d in multi_barcodes_pos pos_access_right_hr pos_payment_transaction pos_transaction_validate pos_user_restrict pos_zero_quantity_restrict product_multi_uom_pos; do printf "\n${d}:\n" && printf "\nVARS:\n" && find "$d" -type f -name "*.py" -exec grep -h "^[[:space:]]*[A-Za-z_][A-Za-z0-9_]*[[:space:]]*=" {} \; 2>/dev/null | sed 's/=.*$//' | sort -u | sed 's/^/  /' && printf "\nFUNCS:\n" && find "$d" -type f -name "*.py" -exec grep -h "^[[:space:]]*def" {} \; 2>/dev/null | sed 's/def //' | sed 's/(.*//' | sort -u | sed 's/^/  /' && printf "\nFILES:\n" && find "$d" -type f \( -name "*.py" -o -name "*.js" -o -name "*.xml" \) -printf "  %f\n" | sort; done) > scan${SCAN_NUM}.txt